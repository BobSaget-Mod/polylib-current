<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>testlib.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.11.1 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>testlib.c</h1><a href="testlib_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/* main.c</font>
00002 <font class="comment">     COPYRIGHT</font>
00003 <font class="comment">          Both this software and its documentation are</font>
00004 <font class="comment"></font>
00005 <font class="comment">              Copyright 1993 by IRISA /Universite de Rennes I - France,</font>
00006 <font class="comment">              Copyright 1995,1996 by BYU</font>
00007 <font class="comment">                         all rights reserved.</font>
00008 <font class="comment"></font>
00009 <font class="comment">          Permission is granted to copy, use, and distribute</font>
00010 <font class="comment">          for any commercial or noncommercial purpose under the terms</font>
00011 <font class="comment">          of the GNU General Public license, version 2, June 1991</font>
00012 <font class="comment">          (see file : LICENSING).</font>
00013 <font class="comment"></font>
00014 <font class="comment">   This file along with polyhedron.c and vector.c do the following functions:</font>
00015 <font class="comment">    - Extraction of a minimal set of constraints from some set of constraints</font>
00016 <font class="comment">    - Intersection of two convexes</font>
00017 <font class="comment">    - Application of a linear function to some convex</font>
00018 <font class="comment">    - Verification that a convex is included in some other convex</font>
00019 <font class="comment"></font>
00020 <font class="comment">   They are compiled together into an executable file called "test".</font>
00021 <font class="comment">   The file test.in contains sample input data for the program.</font>
00022 <font class="comment">   The file test.out contains the output produced by the program.</font>
00023 <font class="comment"></font>
00024 <font class="comment">   This directory also contains a makefile to build and run the test.</font>
00025 <font class="comment"></font>
00026 <font class="comment">   This file is a tutorial on how to use the library.  The comments</font>
00027 <font class="comment">   explain whats going on.  You can use this file as a pattern for your</font>
00028 <font class="comment">   own program.  Good Luck !</font>
00029 <font class="comment"></font>
00030 <font class="comment">   --Doran</font>
00031 <font class="comment">*/</font>
00032 
00033 <font class="preprocessor">#include &lt;stdio.h&gt;</font>
00034 
00035 <font class="preprocessor">#include &lt;polylib/polylib.h&gt;</font>
00036 
00037 
00038 <font class="keywordtype">int</font> main()<font class="keyword"> </font>{ 
00039   
00040   Matrix *a, *b, *t;
00041   Polyhedron *A, *B, *C, *D;
00042   
00043   printf(<font class="stringliteral">"Polyhedral Library Test\n\n"</font>);
00044   
00045   <font class="comment">/* read in a matrix containing your equations */</font>
00046   <font class="comment">/* for example, run this program and type in these five  lines:</font>
00047 <font class="comment">     4 4</font>
00048 <font class="comment">     1 0 1 -1</font>
00049 <font class="comment">     1 -1 0 6</font>
00050 <font class="comment">     1 0 -1 7</font>
00051 <font class="comment">     1 1 0 -2</font>
00052 <font class="comment">     This is a matrix for the following inequalities</font>
00053 <font class="comment">     1 = inequality,  0x +  1y -1 &gt;=0  --&gt;      y &gt;= 1</font>
00054 <font class="comment">     1 = inequality, -1x +  0y +6 &gt;=0  --&gt;      x &lt;= 6</font>
00055 <font class="comment">     1 = inequality,  0x + -1y +7 &gt;=0  --&gt;      y &lt;= 7</font>
00056 <font class="comment">     1 = inequality,  1x +  0y -2 &gt;=0  --&gt;      x &gt;= 2</font>
00057 <font class="comment">     If the first number is a 0 instead of a 1, then that constraint</font>
00058 <font class="comment">     is an 'equality' instead of an 'inequality'.</font>
00059 <font class="comment">  */</font>
00060   a = <a class="code" href="matrix_8c.html#a4">Matrix_Read</a>();
00061   
00062   <font class="comment">/* read in a second matrix containing a second set of constraints:</font>
00063 <font class="comment">     for example :</font>
00064 <font class="comment">     4 4</font>
00065 <font class="comment">     1 1 0 -1</font>
00066 <font class="comment">     1 -1 0 3</font>
00067 <font class="comment">     1 0 -1 5</font>
00068 <font class="comment">     1 0 1 -2</font>
00069 <font class="comment">  */</font>
00070   b = <a class="code" href="matrix_8c.html#a4">Matrix_Read</a>();
00071 
00072   <font class="comment">/* Convert the constraints to a Polyhedron.</font>
00073 <font class="comment">     This operation 1. Computes the dual ray/vertice form of the</font>
00074 <font class="comment">     system, and 2. Eliminates redundant constraints and reduces</font>
00075 <font class="comment">     them to a minimal form.</font>
00076 <font class="comment">  */</font>
00077   A = <a class="code" href="polyhedron_8c.html#a24">Constraints2Polyhedron</a>(a, 200);
00078   B = <a class="code" href="polyhedron_8c.html#a24">Constraints2Polyhedron</a>(b, 200);
00079 
00080   <font class="comment">/* the 200 is the size of the working space (in terms of number</font>
00081 <font class="comment">     of rays) that is allocated temporarily</font>
00082 <font class="comment">     -- you can enlarge or reduce it as needed */</font>
00083   
00084   <font class="comment">/* There is likewise a rays to polyhedron procedure */</font>
00085   
00086   <font class="comment">/* Since you are done with the matrices a and b, be a good citizen</font>
00087 <font class="comment">     and clean up your garbage */</font>
00088   <a class="code" href="matrix_8c.html#a1">Matrix_Free</a>(a);
00089   <a class="code" href="matrix_8c.html#a1">Matrix_Free</a>(b);
00090   
00091   <font class="comment">/* If you want the the reduced set of equations back, you can</font>
00092 <font class="comment">     either learn to read the polyhedron structure (not hard,</font>
00093 <font class="comment">     look in "types.h"...</font>
00094 <font class="comment">     or you can get the matrix back in the same format it started</font>
00095 <font class="comment">     in... */</font>
00096   a = <a class="code" href="polyhedron_8c.html#a25">Polyhedron2Constraints</a>(A);
00097   b = <a class="code" href="polyhedron_8c.html#a25">Polyhedron2Constraints</a>(B);
00098 
00099   <font class="comment">/* Take a look at them if you want */</font>
00100   printf(<font class="stringliteral">"\na ="</font>);
00101   <a class="code" href="matrix_8c.html#a2">Matrix_Print</a>(stdout,P_VALUE_FMT,a);
00102   printf(<font class="stringliteral">"\nb ="</font>);
00103   <a class="code" href="matrix_8c.html#a2">Matrix_Print</a>(stdout,P_VALUE_FMT,b);
00104   
00105   <font class="comment">/* To intersect the two systems, use the polyhedron formats... */</font>
00106   C = <a class="code" href="polyhedron_8c.html#a32">DomainIntersection</a>(A, B, 200);
00107   
00108   <font class="comment">/* Again, the 200 is the size of the working space */</font>
00109   
00110   <font class="comment">/* This time, lets look a the polyhedron itself... */</font>
00111   printf(<font class="stringliteral">"\nC = A and B ="</font>);
00112   <a class="code" href="polyhedron_8c.html#a20">Polyhedron_Print</a>(stdout,P_VALUE_FMT,C);
00113   
00114   <font class="comment">/* </font>
00115 <font class="comment">   * The operations DomainUnion, DomainDifference, and DomainConvex</font>
00116 <font class="comment">   * are also available </font>
00117 <font class="comment">   */</font>
00118   
00119   <font class="comment">/* </font>
00120 <font class="comment">   * Read in a third matrix containing a transformation matrix,</font>
00121 <font class="comment">   * this one swaps the indices (x,y --&gt; y,x):</font>
00122 <font class="comment">   * 3 3</font>
00123 <font class="comment">   * 0 1 0</font>
00124 <font class="comment">   * 1 0 0</font>
00125 <font class="comment">   * 0 0 1</font>
00126 <font class="comment">   */</font>
00127   
00128   
00129   t = <a class="code" href="matrix_8c.html#a4">Matrix_Read</a>();
00130   
00131   <font class="comment">/* Take the preimage (transform the equations) of the domain C to</font>
00132 <font class="comment">     get D.  Are you catching on to this 200 thing yet ??? */</font>
00133   
00134   D = <a class="code" href="polyhedron_8c.html#a50">Polyhedron_Preimage</a>(C, t, 200);
00135   
00136   <font class="comment">/* cleanup please */</font>
00137   <a class="code" href="matrix_8c.html#a1">Matrix_Free</a>(t);
00138   
00139   printf(<font class="stringliteral">"\nD = transformed C ="</font>);
00140   <a class="code" href="polyhedron_8c.html#a20">Polyhedron_Print</a>(stdout,P_VALUE_FMT,D);
00141   <a class="code" href="polyhedron_8c.html#a19">Domain_Free</a>(D);
00142   
00143   <font class="comment">/* in a similar way, Polyhedron_Image(dom, mat, 200), takes the image</font>
00144 <font class="comment">     of dom under matrix mat  (transforms the vertices/rays) */</font>
00145   
00146   <font class="comment">/* The function PolyhedronIncludes(Pol1, Pol2) returns 1 if Pol1</font>
00147 <font class="comment">     includes (covers) Pol2, and a 0 otherwise */</font>
00148   
00149   <font class="keywordflow">if</font> (<a class="code" href="polyhedron_8c.html#a29">PolyhedronIncludes</a>(A,C))
00150     printf(<font class="stringliteral">"\nWe expected A to cover C since C = A intersect B\n"</font>);
00151   <font class="keywordflow">if</font> (!<a class="code" href="polyhedron_8c.html#a29">PolyhedronIncludes</a>(C,B))
00152     printf(<font class="stringliteral">"and C does not cover B...\n"</font>);
00153   
00154   <font class="comment">/* Final note:  some functions are defined for Domains, others</font>
00155 <font class="comment">   * for Polyhedrons.  A domain is simply a list of polyhedrons.</font>
00156 <font class="comment">   * Every polyhedron structure has a "next" pointer used to </font>
00157 <font class="comment">   * make a list of polyhedrons...  For instance, the union of</font>
00158 <font class="comment">   * two disjoint polyhedra is a domain consisting of two polyhedra.</font>
00159 <font class="comment">   * If you want the convex domain... you have to call </font>
00160 <font class="comment">   * DomainConvex(Pol1, 200) explicity.   </font>
00161 <font class="comment">   * Note that includes does not work on domains, only on simple</font>
00162 <font class="comment">   * polyhedrons...</font>
00163 <font class="comment">   * Thats the end of the demo...  write me if you have questions.</font>
00164 <font class="comment">   * And remember to clean up... </font>
00165 <font class="comment">   */</font>
00166   
00167   <a class="code" href="polyhedron_8c.html#a19">Domain_Free</a>(A);
00168   <a class="code" href="polyhedron_8c.html#a19">Domain_Free</a>(B);
00169   <a class="code" href="polyhedron_8c.html#a19">Domain_Free</a>(C);
00170   
00171   <font class="keywordflow">return</font> 0;
00172 }
00173 
00174 
</pre></div><hr><address><small>Generated on Fri Oct 4 16:14:26 2002 for Polylib by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.11.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
