<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ehrhart_union.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.11.1 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>ehrhart_union.c</h1><a href="ehrhart__union_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="preprocessor">#include &lt;stdio.h&gt;</font>
00002 <font class="preprocessor">#include &lt;string.h&gt;</font>
00003 <font class="preprocessor">#include &lt;stdlib.h&gt;</font>
00004 
00005 <font class="preprocessor">#include &lt;polylib/polylib.h&gt;</font>
00006 
00007 
<a name="l00008"></a><a class="code" href="ehrhart__union_8c.html#a0">00008</a> <font class="keywordtype">void</font> <a class="code" href="ehrhart__union_8c.html#a0">Union_Read</a>( Polyhedron **P, Polyhedron **C, <font class="keywordtype">char</font> ***param_name )<font class="keyword"></font>
00009 <font class="keyword"></font>{
00010         Matrix *pm;
00011         Polyhedron *ptmp;
00012         <font class="keywordtype">unsigned</font> NbRows, NbColumns;
00013         <font class="keywordtype">char</font> s[1025], param[1025];
00014         <font class="keywordtype">int</font> i, j, c, f;
00015 
00016         *P = NULL;
00017         pm = <a class="code" href="matrix_8c.html#a4">Matrix_Read</a>();
00018         f=1;
00019         <font class="keywordflow">while</font>( f )
00020         {
00021                 <font class="keywordflow">do</font>
00022                 {
00023                         <font class="keywordflow">if</font>( fgets(s, 1024, stdin) == 0  )
00024                                 f=0;
00025                 }
00026                 <font class="keywordflow">while</font> ( (*s==<font class="charliteral">'#'</font> || *s==<font class="charliteral">'\n'</font>) &amp;&amp; f );
00027 
00028                 <font class="keywordflow">if</font>( f &amp;&amp; sscanf(s, <font class="stringliteral">"%d %d"</font>, &amp;NbRows, &amp;NbColumns)==2 )<font class="keyword"></font>
00029 <font class="keyword">                </font>{
00030                         <font class="comment">/* gets old pm and add it to the union */</font>
00031                         <font class="keywordflow">if</font>( *P )
00032                                 <font class="keywordflow">if</font>( pm-&gt;NbColumns != ((*P)-&gt;Dimension)+2 )
00033                                 {
00034                                         fprintf( stderr,
00035                                                 <font class="stringliteral">"Polyhedra must be in the same dimension space !\n"</font>);
00036                                         exit(0);
00037                                 }
00038                         ptmp = <a class="code" href="polyhedron_8c.html#a24">Constraints2Polyhedron</a>(pm, 200);
00039                         ptmp-&gt;next = *P;
00040                         *P = ptmp;
00041                         <a class="code" href="matrix_8c.html#a1">Matrix_Free</a>(pm);
00042 
00043                         <font class="comment">/* reads the new pm */</font>
00044                         pm = <a class="code" href="matrix_8c.html#a0">Matrix_Alloc</a>(NbRows, NbColumns);
00045                         <a class="code" href="matrix_8c.html#a3">Matrix_Read_Input</a>( pm );
00046                 }
00047                 <font class="keywordflow">else</font>
00048                         <font class="keywordflow">break</font>;
00049         }
00050 
00051         <font class="comment">/* Context : last read pm */</font>
00052         *C = <a class="code" href="polyhedron_8c.html#a24">Constraints2Polyhedron</a>(pm, 200);
00053         <a class="code" href="matrix_8c.html#a1">Matrix_Free</a>(pm);
00054 
00055 
00056         <font class="keywordflow">if</font>( f )
00057         {
00058                 <font class="comment">/* read the parameter names */</font>
00059                 *param_name = (<font class="keywordtype">char</font> **)malloc( (*C)-&gt;Dimension*<font class="keyword">sizeof</font>(<font class="keywordtype">char</font> *) );
00060                 c = 0;
00061                 <font class="keywordflow">for</font>( i=0 ; i&lt;(*C)-&gt;Dimension ; ++i )
00062                 {
00063                         j=0;
00064                         <font class="keywordflow">for</font>( ; ; ++c )
00065                         {
00066                                 <font class="keywordflow">if</font>( s[c]==<font class="charliteral">' '</font> || s[c]==<font class="charliteral">'\n'</font> || s[c]==0 ) {
00067                                         <font class="keywordflow">if</font>( j==0 )
00068                                                 <font class="keywordflow">continue</font>;
00069                                         <font class="keywordflow">else</font>
00070                                                 <font class="keywordflow">break</font>;
00071                                 }
00072                                 param[j++] = s[c];
00073                         }
00074 
00075                         <font class="comment">/* else, no parameters (use default) */</font>
00076                         <font class="keywordflow">if</font>( j==0 )
00077                                 <font class="keywordflow">break</font>;
00078                         param[j] = 0;
00079                         (*param_name)[i] = (<font class="keywordtype">char</font> *)malloc( j );
00080                         strcpy( (*param_name)[i], param );
00081                 }
00082                 <font class="keywordflow">if</font>( i != (*C)-&gt;Dimension )
00083                 {
00084                         free( *param_name );
00085                         *param_name = NULL;
00086                 }
00087         }
00088         <font class="keywordflow">else</font>
00089                 *param_name = NULL;
00090 
00091 }
00092 
00093 
00094 
<a name="l00095"></a><a class="code" href="ehrhart__union_8c.html#a1">00095</a> <font class="keywordtype">int</font> <a class="code" href="ehrhart__union_8c.html#a1">main</a>( <font class="keywordtype">int</font> argc, <font class="keywordtype">char</font> **argv)<font class="keyword"></font>
00096 <font class="keyword"></font>{
00097         Polyhedron *P, *C;
00098         <font class="keywordtype">char</font> **param_name;
00099         Enumeration *e, *en;
00100 
00101         <font class="keywordflow">if</font>( argc != 1 )
00102         {
00103                 fprintf( stderr, <font class="stringliteral">" Usage : %s [&lt; file]\n"</font>, argv[0] );
00104                 <font class="keywordflow">return</font>( -1 );
00105         }
00106 
00107         <a class="code" href="ehrhart__union_8c.html#a0">Union_Read</a>( &amp;P, &amp;C, &amp;param_name );
00108 
00109         e = <a class="code" href="ext__ehrhart_8c.html#a19">Domain_Enumerate</a>( P, C, 200, param_name );
00110 
00111         <font class="keywordflow">for</font>( en=e ; en ; en=en-&gt;next )
00112         {
00113           <a class="code" href="polyparam_8c.html#a39">Print_Domain</a>(stdout,en-&gt;ValidityDomain, param_name);
00114           <a class="code" href="ehrhart_8c~.html#a10">print_evalue</a>(stdout,&amp;en-&gt;EP, param_name);
00115           printf( <font class="stringliteral">"\n-----------------------------------\n"</font> );
00116         }
00117 
00118         <font class="keywordflow">return</font>( 0 );
00119 }
00120 
00121 
00122 
</pre></div><hr><address><small>Generated on Fri Oct 4 15:05:56 2002 for Polylib by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.11.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
