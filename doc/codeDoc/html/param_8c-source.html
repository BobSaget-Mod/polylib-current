<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>param.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>param.c</h1><a href="param_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="preprocessor">#include &lt;stdio.h&gt;</font>
00002 <font class="preprocessor">#include &lt;string.h&gt;</font>
00003 
00004 <font class="preprocessor">#include &lt;polylib/polylib.h&gt;</font>
00005 
00006 <font class="comment">/****************************************************/</font>
00007 <font class="comment">/* Read_ParamNames() :                              */</font>
00008 <font class="comment">/* Reads FILE *in for the parameter names           */</font>
00009 <font class="comment">/* if in==NULL or not enough parameters on input,   */</font>
00010 <font class="comment">/*  use default names                               */</font>
00011 <font class="comment">/* returns an n-array of strings                    */</font>
00012 <font class="comment">/****************************************************/</font>
<a name="l00013"></a><a class="code" href="param_8c.html#a0">00013</a> <font class="keywordtype">char</font> **<a class="code" href="param_8c.html#a0">Read_ParamNames</a>(FILE *in,<font class="keywordtype">int</font> m) {
00014         
00015   <font class="keywordtype">char</font> **param_name;
00016   <font class="keywordtype">int</font> c, i, j, f;
00017   <font class="keywordtype">char</font> s[1024],param[32];
00018   
00019   <font class="keywordflow">if</font>(!in)
00020     f = 0;
00021   <font class="keywordflow">else</font>
00022     <font class="keywordflow">do</font>
00023       f = (fgets(s, 1024, in)!=NULL);
00024     <font class="keywordflow">while</font> ((*s==<font class="charliteral">'#'</font> || *s==<font class="charliteral">'\n'</font>) &amp;&amp; f);
00025   
00026   param_name = (<font class="keywordtype">char</font> **)malloc(m*<font class="keyword">sizeof</font>(<font class="keywordtype">char</font> *));
00027   i = 0;
00028   <font class="keywordflow">if</font>(f) {
00029     c = 0;
00030     <font class="keywordflow">for</font>(;i&lt;m;++i) {
00031       j=0;
00032       <font class="keywordflow">for</font>(;;++c) {
00033         <font class="keywordflow">if</font>(s[c]==<font class="charliteral">' '</font>) {
00034           <font class="keywordflow">if</font>(j==0)
00035             <font class="keywordflow">continue</font>;
00036           <font class="keywordflow">else</font>
00037             <font class="keywordflow">break</font>;
00038         }
00039         <font class="keywordflow">if</font>(s[c]==<font class="charliteral">'\n'</font> || s[c]==0)
00040           <font class="keywordflow">break</font>;
00041         param[j++] = s[c];
00042       }
00043 
00044       <font class="comment">/* Not enough parameters on input, end */</font>
00045       <font class="keywordflow">if</font>(j==0)
00046         <font class="keywordflow">break</font>;
00047       param[j] = 0;
00048       param_name[i] = (<font class="keywordtype">char</font> *)malloc( j*<font class="keyword">sizeof</font>(<font class="keywordtype">char</font>) );
00049       strcpy(param_name[i],param);
00050     }
00051   }
00052   
00053   <font class="comment">/* Not enough parameters on input : use default names */</font>
00054   <font class="keywordflow">if</font>(!f || i!=m) {
00055     <font class="keywordflow">for</font>(;i&lt;m;++i) {
00056       param_name[i] = (<font class="keywordtype">char</font> *) malloc(2*<font class="keyword">sizeof</font>(<font class="keywordtype">char</font>));
00057       sprintf(param_name[i], <font class="stringliteral">"%c"</font>, PCHAR+i+1);
00058     }
00059   }
00060   <font class="keywordflow">return</font>(param_name);
00061 } <font class="comment">/* Read_ParamNames */</font>
00062 
</pre></div><hr><address align="right"><small>Generated on Fri Nov 8 12:10:06 2002 for Polylib by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
