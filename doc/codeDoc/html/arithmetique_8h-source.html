<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>arithmetique.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>arithmetique.h</h1><a href="arithmetique_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/* header file built by cproto */</font>
00002 <font class="preprocessor">#ifndef arithmetique_header_included</font>
00003 <font class="preprocessor"></font><font class="preprocessor">#define arithmetique_header_included</font>
00004 <font class="preprocessor"></font>
00005 <font class="comment">/* package arithmetique</font>
00006 <font class="comment"> *</font>
00007 <font class="comment"> * $Id: arithmetique_8h-source.html,v 1.2 2002/12/05 11:36:17 loechner Exp $</font>
00008 <font class="comment"> *</font>
00009 <font class="comment"> * Francois Irigoin, mai 1989</font>
00010 <font class="comment"> *</font>
00011 <font class="comment"> * Modifications</font>
00012 <font class="comment"> *  - reprise de DIVIDE qui etait faux (Remi Triolet, Francois Irigoin, </font>
00013 <font class="comment"> *    april 90)</font>
00014 <font class="comment"> *  - simplification de POSITIVE_DIVIDE par suppression d'un modulo</font>
00015 <font class="comment"> */</font>
00016 
00017 <font class="comment">/* We would like linear to be generic about the "integer" type used</font>
00018 <font class="comment"> * to represent integer values. Thus Value is defined here. It should</font>
00019 <font class="comment"> * be changed to "int" "long" or "long long". In an ideal world,</font>
00020 <font class="comment"> * any source modification should be limited to this package.</font>
00021 <font class="comment"> *</font>
00022 <font class="comment"> * Indeed, we cannot switch easily to bignums that need constructors </font>
00023 <font class="comment"> * dans destructors... That would lead to too many modifications...</font>
00024 <font class="comment"> * C++ would make things easier and cleaner...</font>
00025 <font class="comment"> *</font>
00026 <font class="comment"> * Fabien COELHO</font>
00027 <font class="comment"> */</font>
00028 
00029 <font class="preprocessor">#include &lt;stdio.h&gt;</font>
00030 <font class="preprocessor">#include &lt;limits.h&gt;</font>   <font class="comment">/* Included for getting constants: INT_MAX, etc.. */</font>
00031 
00032 <font class="preprocessor">#ifdef GNUMP</font>
00033 <font class="preprocessor"></font><font class="preprocessor">#include &lt;gmp.h&gt;</font>
00034 <font class="preprocessor">#endif </font>
00035 <font class="preprocessor"></font>
00036 <font class="comment">/* </font>
00037 <font class="comment">   #        ####   #    #   ####           #        ####   #    #   ####</font>
00038 <font class="comment">   #       #    #  ##   #  #    #          #       #    #  ##   #  #    #</font>
00039 <font class="comment">   #       #    #  # #  #  #               #       #    #  # #  #  #</font>
00040 <font class="comment">   #       #    #  #  # #  #  ###          #       #    #  #  # #  #  ###</font>
00041 <font class="comment">   #       #    #  #   ##  #    #          #       #    #  #   ##  #    #</font>
00042 <font class="comment">   ######   ####   #    #   ####           ######   ####   #    #   ####</font>
00043 <font class="comment">   </font>
00044 <font class="comment">*/</font>
00045 
00046 <font class="comment">/* </font>
00047 <font class="comment"> * Constants like LONG_LONG_MAX are not defined with ansi options, so they are</font>
00048 <font class="comment"> * defined here. </font>
00049 <font class="comment"> */</font>  
00050 
00051 <font class="preprocessor">#ifndef LONG_LONG_MAX</font>
00052 <font class="preprocessor"></font>
00053 <font class="comment">/* would fix on solaris:</font>
00054 <font class="comment"> * #define LONG_LONG_MAX LLONG_MAX</font>
00055 <font class="comment"> * #define LONG_LONG_MIN LLONG_MIN</font>
00056 <font class="comment"> */</font>
00057 
00058 <font class="preprocessor">#ifndef __LONG_LONG_MAX__</font>
<a name="l00059"></a><a class="code" href="arithmetique_8h.html#a0">00059</a> <font class="preprocessor"></font><font class="preprocessor">#define __LONG_LONG_MAX__ 9223372036854775807LL</font>
00060 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00061 <font class="preprocessor"></font><font class="preprocessor">#undef LONG_LONG_MAX</font>
<a name="l00062"></a><a class="code" href="arithmetique_8h.html#a1">00062</a> <font class="preprocessor"></font><font class="preprocessor">#define LONG_LONG_MAX __LONG_LONG_MAX__</font>
00063 <font class="preprocessor"></font><font class="preprocessor">#undef LONG_LONG_MIN</font>
<a name="l00064"></a><a class="code" href="arithmetique_8h.html#a2">00064</a> <font class="preprocessor"></font><font class="preprocessor">#define LONG_LONG_MIN (-LONG_LONG_MAX-1)</font>
00065 <font class="preprocessor"></font><font class="preprocessor">#undef ULONG_LONG_MAX</font>
<a name="l00066"></a><a class="code" href="arithmetique_8h.html#a3">00066</a> <font class="preprocessor"></font><font class="preprocessor">#define ULONG_LONG_MAX (LONG_LONG_MAX * 2ULL + 1)</font>
00067 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00068 <font class="preprocessor"></font>
00069 <font class="preprocessor">#if defined(LINEAR_VALUE_IS_LONGLONG)</font>
00070 <font class="preprocessor"></font>
00071 <font class="preprocessor">#define LINEAR_VALUE_STRING "long long int"</font>
00072 <font class="preprocessor"></font><font class="keyword">typedef</font> <font class="keywordtype">long</font> <font class="keywordtype">long</font> <font class="keywordtype">int</font> <a class="code" href="arithmetique_8h.html#a93">Value</a>;
00073 <font class="preprocessor">#define VALUE_FMT "%lld"</font>
00074 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_CONST(val) (val##LL) </font>
00075 <font class="preprocessor"></font>
00076 <font class="comment">/* </font>
00077 <font class="comment"> * CAUTION! 'VALUE_MIN' is defined as 'LONG_LONG_MIN +1' so as to preserve the</font>
00078 <font class="comment"> * symmetry (-min==max) and to have a NAN value. FC </font>
00079 <font class="comment"> */</font> 
00080 
00081 <font class="preprocessor">#define VALUE_NAN LONG_LONG_MIN</font>
00082 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_MIN (LONG_LONG_MIN+1LL)</font>
00083 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_MAX LONG_LONG_MAX</font>
00084 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_SQRT_MIN long_to_value(LONG_MIN) </font>
00085 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_SQRT_MAX long_to_value(LONG_MAX)</font>
00086 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_ZERO (0LL)</font>
00087 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_ONE  (1LL)</font>
00088 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_MONE (-1LL)</font>
00089 <font class="preprocessor"></font>
00090 <font class="preprocessor">#define VALUE_TO_LONG(val) \</font>
00091 <font class="preprocessor">    ((long)((val)&gt;(Value)LONG_MIN&amp;&amp;(val)&lt;=(Value)LONG_MAX)?\</font>
00092 <font class="preprocessor">     (val):(THROW(overflow_error), LONG_MIN))</font>
00093 <font class="preprocessor"></font>
00094 <font class="preprocessor">#define VALUE_TO_INT(val) \</font>
00095 <font class="preprocessor">    ((int)((val)&gt;(Value)INT_MIN&amp;&amp;(val)&lt;=(Value)INT_MAX)?\</font>
00096 <font class="preprocessor">     (val):(THROW(overflow_error), INT_MIN))</font>
00097 <font class="preprocessor"></font>
00098 <font class="preprocessor">#define VALUE_TO_DOUBLE(val) ((double)(val))</font>
00099 <font class="preprocessor"></font>
00100 <font class="comment">/* #define VALUE_TO_FLOAT(val) ((float)(val)): Doesn't seem to work with gcc */</font>
00101 <font class="preprocessor">#define VALUE_TO_FLOAT(val) ((float)((int)(val)))</font>
00102 <font class="preprocessor"></font>
00103 <font class="comment">/* end LINEAR_VALUE_IS_LONGLONG */</font>
00104 
00105 <font class="comment">/* </font>
00106 <font class="comment"> </font>
00107 <font class="comment">   #        ####   #    #   ####</font>
00108 <font class="comment">   #       #    #  ##   #  #    #</font>
00109 <font class="comment">   #       #    #  # #  #  #</font>
00110 <font class="comment">   #       #    #  #  # #  #  ###</font>
00111 <font class="comment">   #       #    #  #   ##  #    #</font>
00112 <font class="comment">   ######   ####   #    #   ####</font>
00113 <font class="comment"> </font>
00114 <font class="comment">*/</font>
00115 
00116 <font class="preprocessor">#elif defined(LINEAR_VALUE_IS_LONG)</font>
00117 <font class="preprocessor"></font>
00118 <font class="preprocessor">#define LINEAR_VALUE_STRING "long int"</font>
00119 <font class="preprocessor"></font><font class="keyword">typedef</font> <font class="keywordtype">long</font> <a class="code" href="arithmetique_8h.html#a93">Value</a>;
00120 <font class="preprocessor">#define VALUE_FMT "%ld"</font>
00121 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_CONST(val) (val##L)</font>
00122 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_NAN LONG_MIN</font>
00123 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_MIN (LONG_MIN+1L)</font>
00124 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_MAX LONG_MAX</font>
00125 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_ZERO 0L</font>
00126 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_ONE  1L</font>
00127 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_MONE -1L</font>
00128 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_LONG(val) (val)</font>
00129 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_INT(val) ((int)(val))</font>
00130 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_FLOAT(val) ((float)(val))</font>
00131 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_DOUBLE(val) ((double)(val))</font>
00132 <font class="preprocessor"></font>
00133 <font class="comment">/* end LINEAR_VALUE_IS_LONG */</font>
00134 
00135 <font class="comment">/* </font>
00136 <font class="comment">   ######  #        ####     ##     #####</font>
00137 <font class="comment">   #       #       #    #   #  #      #</font>
00138 <font class="comment">   #####   #       #    #  #    #     #</font>
00139 <font class="comment">   #       #       #    #  ######     #</font>
00140 <font class="comment">   #       #       #    #  #    #     #</font>
00141 <font class="comment">   #       ######   ####   #    #     #</font>
00142 <font class="comment"> </font>
00143 <font class="comment">*/</font>
00144 
00145 <font class="comment">/*</font>
00146 <font class="comment">#elif defined(LINEAR_VALUE_IS_FLOAT)</font>
00147 <font class="comment"></font>
00148 <font class="comment">#define LINEAR_VALUE_STRING "float"</font>
00149 <font class="comment">typedef float Value;</font>
00150 <font class="comment">#define VALUE_FMT "%f"</font>
00151 <font class="comment">#define VALUE_CONST(val) (val)</font>
00152 <font class="comment">#define VALUE_MIN FLOAT_MIN</font>
00153 <font class="comment">#define VALUE_MAX FLOAT_MAX</font>
00154 <font class="comment">#define VALUE_ZERO 0.0</font>
00155 <font class="comment">#define VALUE_ONE  1.0</font>
00156 <font class="comment">#define VALUE_MONE -1.0</font>
00157 <font class="comment">#define VALUE_TO_LONG(val) ((long)(val))</font>
00158 <font class="comment">#define VALUE_TO_INT(val) ((int)(val))</font>
00159 <font class="comment">#define VALUE_TO_FLOAT(val) ((float)(val))</font>
00160 <font class="comment">#define VALUE_TO_DOUBLE(val) ((double)(val))</font>
00161 <font class="comment"></font>
00162 <font class="comment">*/</font>
00163 
00164 <font class="comment">/* end LINEAR_VALUE_IS_FLOAT */</font>
00165 
00166 <font class="comment">/*</font>
00167 <font class="comment">   ####   #    #    ##    #####           #   #</font>
00168 <font class="comment">  #    #  #    #   #  #   #    #           # #</font>
00169 <font class="comment">  #       ######  #    #  #    #         #######</font>
00170 <font class="comment">  #       #    #  ######  #####            # #</font>
00171 <font class="comment">  #    #  #    #  #    #  #   #           #   #</font>
00172 <font class="comment">   ####   #    #  #    #  #    #</font>
00173 <font class="comment">  </font>
00174 <font class="comment">   */</font>
00175 
00176 <font class="comment">/* Char version is used to detect invalid assignments */</font>
00177 
00178 <font class="preprocessor">#elif defined(LINEAR_VALUE_IS_CHARS)</font>
00179 <font class="preprocessor"></font>
00180 <font class="preprocessor">#define LINEAR_VALUE_STRING "char"</font>
00181 <font class="preprocessor"></font><font class="keyword">typedef</font> <font class="keyword">union </font>{ <font class="keywordtype">char</font> *s; <font class="keywordtype">long</font> l; <font class="keywordtype">int</font> i; <font class="keywordtype">float</font> f; <font class="keywordtype">double</font> d;} <a class="code" href="arithmetique_8h.html#a93">Value</a>;
00182 <font class="preprocessor">#define VALUE_FMT "%s"</font>
00183 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_CONST(val) ((Value)(val))</font>
00184 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_NAN ((Value)(long)0xdadeebee)</font>
00185 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_MIN ((Value)(long)0xdeadbeef)</font>
00186 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_MAX ((Value)(long)0xfeedabee)</font>
00187 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_ZERO ((Value)0)</font>
00188 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_ONE  ((Value)1)</font>
00189 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_MONE ((Value)-1)</font>
00190 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_LONG(val) (val.l)</font>
00191 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_INT(val) (val.i)</font>
00192 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_FLOAT(val) (val.f)</font>
00193 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_DOUBLE(val) (val.d)</font>
00194 <font class="preprocessor"></font>
00195 <font class="comment">/* end LINEAR_VALUE_IS_CHARS */</font>
00196 
00197 <font class="comment">/*</font>
00198 <font class="comment">    #    #    #   #####</font>
00199 <font class="comment">    #    ##   #     #</font>
00200 <font class="comment">    #    # #  #     #</font>
00201 <font class="comment">    #    #  # #     #</font>
00202 <font class="comment">    #    #   ##     #</font>
00203 <font class="comment">    #    #    #     #</font>
00204 <font class="comment"></font>
00205 <font class="comment">*/</font>
00206 
00207 <font class="preprocessor">#elif defined(LINEAR_VALUE_IS_INT)</font>
00208 <font class="preprocessor"></font>
00209 <font class="preprocessor">#define LINEAR_VALUE_STRING "int"</font>
00210 <font class="preprocessor"></font><font class="keyword">typedef</font> <font class="keywordtype">int</font> <a class="code" href="arithmetique_8h.html#a93">Value</a>;
00211 <font class="preprocessor">#define VALUE_FMT "%d"</font>
00212 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_CONST(val) (val)</font>
00213 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_NAN INT_MIN</font>
00214 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_MIN (INT_MIN+1)</font>
00215 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_MAX INT_MAX</font>
00216 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_ZERO  0</font>
00217 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_ONE   1</font>
00218 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_MONE -1</font>
00219 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_LONG(val) ((long)(val))</font>
00220 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_INT(val) ((int)(val))</font>
00221 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_FLOAT(val) ((float)(val))</font>
00222 <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_DOUBLE(val) ((double)(val))</font>
00223 <font class="preprocessor"></font>
00224 <font class="comment">/* end LINEAR_VALUE_IS_INT */</font>
00225 
00226 <font class="preprocessor">#else  </font><font class="comment">/* If defined(GNUMP) */</font>
00227 
<a name="l00228"></a><a class="code" href="arithmetique_8h.html#a4">00228</a> <font class="preprocessor">#define LINEAR_VALUE_STRING "gmp"</font>
<a name="l00229"></a><a class="code" href="arithmetique_8h.html#a93">00229</a> <font class="preprocessor"></font><font class="keyword">typedef</font> mpz_t <a class="code" href="arithmetique_8h.html#a93">Value</a>;
<a name="l00230"></a><a class="code" href="arithmetique_8h.html#a5">00230</a> <font class="preprocessor">#define VALUE_FMT "%s"</font>
00231 <font class="preprocessor"></font>
00232 <font class="comment">/* don't use these, use value_set_si instead ! */</font>
00233 <font class="preprocessor">#undef VALUE_ZERO</font>
00234 <font class="preprocessor"></font><font class="preprocessor">#undef VALUE_ONE</font>
00235 <font class="preprocessor"></font><font class="preprocessor">#undef VALUE_MONE</font>
<a name="l00236"></a><a class="code" href="arithmetique_8h.html#a6">00236</a> <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_LONG(val) (mpz_get_si(val))</font>
<a name="l00237"></a><a class="code" href="arithmetique_8h.html#a7">00237</a> <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_INT(val) ((int)mpz_get_si(val))</font>
<a name="l00238"></a><a class="code" href="arithmetique_8h.html#a8">00238</a> <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_FLOAT(val) ((float)((int)mpz_get_si(val)))</font>
<a name="l00239"></a><a class="code" href="arithmetique_8h.html#a9">00239</a> <font class="preprocessor"></font><font class="preprocessor">#define VALUE_TO_DOUBLE(val) (mpz_get_d(val))</font>
00240 <font class="preprocessor"></font>
00241 <font class="preprocessor">#endif </font>
00242 <font class="preprocessor"></font>
00243 <font class="comment">/* ***************** MACROS FOR MANIPULATING VALUES ******************** */</font>
00244 
00245 <font class="preprocessor">#if defined(GNUMP)</font>
00246 <font class="preprocessor"></font>
00247 <font class="comment">/* Basic macros */</font>
00248 
00249 <font class="preprocessor">#define value_init(val)        (mpz_init((val)))</font>
00250 <font class="preprocessor"></font><font class="preprocessor">#define value_assign(v1,v2)    (mpz_set((v1),(v2)))</font>
00251 <font class="preprocessor"></font><font class="preprocessor">#define value_set_si(val,i)    (mpz_set_si((val),(i)))    </font>
00252 <font class="preprocessor"></font><font class="preprocessor">#define value_set_double(val,d)(mpz_set_d((val),(d)))</font>
00253 <font class="preprocessor"></font><font class="preprocessor">#define value_clear(val)       (mpz_clear((val)))</font>
00254 <font class="preprocessor"></font><font class="preprocessor">#define value_read(val,str)    (mpz_set_str((val),(str),10))</font>
00255 <font class="preprocessor"></font><font class="preprocessor">#define value_print(Dst,fmt,val)  {char *str; str = mpz_get_str(0,10,(val)); \</font>
00256 <font class="preprocessor">                               fprintf((Dst),(fmt),str); free(str); \</font>
00257 <font class="preprocessor">                              }</font>
00258 <font class="preprocessor"></font><font class="preprocessor">#define value_swap(val1,val2)  {mpz_t tmp; mpz_init_set(tmp,(val1)); \</font>
00259 <font class="preprocessor">                                mpz_set((val1),(val2)); mpz_set((val2),tmp); \</font>
00260 <font class="preprocessor">                                mpz_clear(tmp); \</font>
00261 <font class="preprocessor">                               }</font>
00262 <font class="preprocessor"></font>                                             
00263 <font class="comment">/* Boolean operators on 'Value' */</font>
00264 
00265 <font class="preprocessor">#define value_eq(v1,v2) (mpz_cmp((v1),(v2)) == 0)</font>
00266 <font class="preprocessor"></font><font class="preprocessor">#define value_ne(v1,v2) (mpz_cmp((v1),(v2)) != 0)</font>
00267 <font class="preprocessor"></font><font class="preprocessor">#define value_gt(v1,v2) (mpz_cmp((v1),(v2))  &gt; 0)</font>
00268 <font class="preprocessor"></font><font class="preprocessor">#define value_ge(v1,v2) (mpz_cmp((v1),(v2)) &gt;= 0)</font>
00269 <font class="preprocessor"></font><font class="preprocessor">#define value_lt(v1,v2) (mpz_cmp((v1),(v2))  &lt; 0)</font>
00270 <font class="preprocessor"></font><font class="preprocessor">#define value_le(v1,v2) (mpz_cmp((v1),(v2)) &lt;= 0)</font>
00271 <font class="preprocessor"></font>
00272 <font class="comment">/* Trian operators on 'Value' */</font>
00273 
00274 <font class="preprocessor">#define value_sign(val)      (mpz_sgn(val))</font>
00275 <font class="preprocessor"></font><font class="preprocessor">#define value_compare(v1,v2) (mpz_cmp((v1),(v2)))</font>
00276 <font class="preprocessor"></font>
00277 <font class="comment">/* Binary operations on 'Value' */</font>
00278 
00279 <font class="preprocessor">#define value_addto(ref,val1,val2)     (mpz_add((ref),(val1),(val2)))</font>
00280 <font class="preprocessor"></font><font class="preprocessor">#define value_add_int(ref,val,vint)     (mpz_add_ui((ref),(val),(long)(vint)))</font>
00281 <font class="preprocessor"></font><font class="preprocessor">#define value_increment(ref,val)       (mpz_add_ui((ref),(val),1))</font>
00282 <font class="preprocessor"></font><font class="preprocessor">#define value_multiply(ref,val1,val2)  (mpz_mul((ref),(val1),(val2)))</font>
00283 <font class="preprocessor"></font><font class="preprocessor">#define value_substract(ref,val1,val2) (mpz_sub((ref),(val1),(val2)))</font>
00284 <font class="preprocessor"></font><font class="preprocessor">#define value_sub_int(ref,val,vint)     (mpz_sub_ui((ref),(val),(long)(vint)))</font>
00285 <font class="preprocessor"></font><font class="preprocessor">#define value_decrement(ref,val)       (mpz_sub_ui((ref),(val),1))</font>
00286 <font class="preprocessor"></font><font class="preprocessor">#define value_division(ref,val1,val2)  (mpz_tdiv_q((ref),(val1),(val2)))</font>
00287 <font class="preprocessor"></font><font class="preprocessor">#define value_modulus(ref,val1,val2)   (mpz_tdiv_r((ref),(val1),(val2)))</font>
00288 <font class="preprocessor"></font><font class="preprocessor">#define value_pdivision(ref,val1,val2) (mpz_fdiv_q((ref),(val1),(val2)))</font>
00289 <font class="preprocessor"></font><font class="preprocessor">#define value_oppose(ref,val)          (mpz_neg((ref),(val)))</font>
00290 <font class="preprocessor"></font><font class="preprocessor">#define value_absolute(ref,val)        (mpz_abs((ref),(val)))</font>
00291 <font class="preprocessor"></font><font class="preprocessor">#define value_minimum(ref,val1,val2)   (value_le((val1),(val2)) ?  \</font>
00292 <font class="preprocessor">                                        mpz_set((ref),(val1)) :    \</font>
00293 <font class="preprocessor">                                        mpz_set((ref),(val2)))  </font>
00294 <font class="preprocessor"></font><font class="preprocessor">#define value_maximum(ref,val1,val2)   (value_ge((val1),(val2)) ?  \</font>
00295 <font class="preprocessor">                                        mpz_set((ref),(val1)) :    \</font>
00296 <font class="preprocessor">                                        mpz_set((ref),(val2)))  </font>
00297 <font class="preprocessor"></font><font class="preprocessor">#define value_orto(ref,val1,val2)      (mpz_ior((ref),(val1),(val2)))</font>
00298 <font class="preprocessor"></font><font class="preprocessor">#define value_andto(ref,val1,val2)     (mpz_and((ref),(val1),(val2)))</font>
00299 <font class="preprocessor"></font>
00300 <font class="comment">/* Conditional operations on 'Value' */</font>
00301 
00302 <font class="preprocessor">#define value_pos_p(val)         (mpz_sgn(val) &gt;  0)</font>
00303 <font class="preprocessor"></font><font class="preprocessor">#define value_neg_p(val)         (mpz_sgn(val) &lt;  0)</font>
00304 <font class="preprocessor"></font><font class="preprocessor">#define value_posz_p(val)        (mpz_sgn(val) &gt;= 0)</font>
00305 <font class="preprocessor"></font><font class="preprocessor">#define value_negz_p(val)        (mpz_sgn(val) &lt;= 0)</font>
00306 <font class="preprocessor"></font><font class="preprocessor">#define value_zero_p(val)        (mpz_sgn(val) == 0)</font>
00307 <font class="preprocessor"></font><font class="preprocessor">#define value_notzero_p(val)     (mpz_sgn(val) != 0)</font>
00308 <font class="preprocessor"></font><font class="preprocessor">#define value_one_p(val)         (mpz_cmp_si(val,1) == 0)</font>
00309 <font class="preprocessor"></font><font class="preprocessor">#define value_notone_p(val)      (mpz_cmp_si(val,1) != 0)</font>
00310 <font class="preprocessor"></font><font class="preprocessor">#define value_mone_p(val)        (mpz_cmp_si(val,-1) ==0)</font>
00311 <font class="preprocessor"></font><font class="preprocessor">#define value_notmone_p(val)     (mpz_cmp_si(val,-1) !=0)</font>
00312 <font class="preprocessor"></font>
00313 <font class="comment">/* ************************************************************************* */</font>
00314 
00315 <font class="preprocessor">#else </font><font class="comment">/* 'Value' set to longlong|long|float|char *|int */</font>                                       
00316 <font class="comment">/* Basic Macros */</font>                                  
00317 
<a name="l00318"></a><a class="code" href="arithmetique_8h.html#a10">00318</a> <font class="preprocessor">#define value_init(val)            ((val) = 0)</font>
<a name="l00319"></a><a class="code" href="arithmetique_8h.html#a11">00319</a> <font class="preprocessor"></font><font class="preprocessor">#define value_assign(v1,v2)        ((v1)  = (v2))</font>
<a name="l00320"></a><a class="code" href="arithmetique_8h.html#a12">00320</a> <font class="preprocessor"></font><font class="preprocessor">#define value_set_si(val,i)        ((val) = (Value)(i))   </font>
<a name="l00321"></a><a class="code" href="arithmetique_8h.html#a13">00321</a> <font class="preprocessor"></font><font class="preprocessor">#define value_set_double(val,d)    ((val) = (Value)(d)) </font>
<a name="l00322"></a><a class="code" href="arithmetique_8h.html#a14">00322</a> <font class="preprocessor"></font><font class="preprocessor">#define value_clear(val)           ((val) = 0)</font>
<a name="l00323"></a><a class="code" href="arithmetique_8h.html#a15">00323</a> <font class="preprocessor"></font><font class="preprocessor">#define value_read(val,str)        (sscanf((str),VALUE_FMT,&amp;(val)))</font>
<a name="l00324"></a><a class="code" href="arithmetique_8h.html#a16">00324</a> <font class="preprocessor"></font><font class="preprocessor">#define value_print(Dst,fmt,val)   (fprintf((Dst),(fmt),(val)))</font>
<a name="l00325"></a><a class="code" href="arithmetique_8h.html#a17">00325</a> <font class="preprocessor"></font><font class="preprocessor">#define value_swap(v1,v2)          {Value tmp; tmp = v2; \</font>
00326 <font class="preprocessor">                                    v2 = v1; v1 = tmp;   \</font>
00327 <font class="preprocessor">                                   }</font>
00328 <font class="preprocessor"></font><font class="comment">/* Cast to 'Value' */</font>
00329 
<a name="l00330"></a><a class="code" href="arithmetique_8h.html#a18">00330</a> <font class="preprocessor">#define int_to_value(i) ((Value)(i))</font>
<a name="l00331"></a><a class="code" href="arithmetique_8h.html#a19">00331</a> <font class="preprocessor"></font><font class="preprocessor">#define long_to_value(l) ((Value)(l))</font>
<a name="l00332"></a><a class="code" href="arithmetique_8h.html#a20">00332</a> <font class="preprocessor"></font><font class="preprocessor">#define float_to_value(f) ((Value)(f))</font>
<a name="l00333"></a><a class="code" href="arithmetique_8h.html#a21">00333</a> <font class="preprocessor"></font><font class="preprocessor">#define double_to_value(d) ((Value)(d))</font>
00334 <font class="preprocessor"></font>   
00335 <font class="comment">/* Boolean operators on 'Value' */</font>
00336 
<a name="l00337"></a><a class="code" href="arithmetique_8h.html#a22">00337</a> <font class="preprocessor">#define value_eq(v1,v2) ((v1)==(v2))</font>
<a name="l00338"></a><a class="code" href="arithmetique_8h.html#a23">00338</a> <font class="preprocessor"></font><font class="preprocessor">#define value_ne(v1,v2) ((v1)!=(v2))</font>
<a name="l00339"></a><a class="code" href="arithmetique_8h.html#a24">00339</a> <font class="preprocessor"></font><font class="preprocessor">#define value_gt(v1,v2) ((v1)&gt;(v2))</font>
<a name="l00340"></a><a class="code" href="arithmetique_8h.html#a25">00340</a> <font class="preprocessor"></font><font class="preprocessor">#define value_ge(v1,v2) ((v1)&gt;=(v2))</font>
<a name="l00341"></a><a class="code" href="arithmetique_8h.html#a26">00341</a> <font class="preprocessor"></font><font class="preprocessor">#define value_lt(v1,v2) ((v1)&lt;(v2))</font>
<a name="l00342"></a><a class="code" href="arithmetique_8h.html#a27">00342</a> <font class="preprocessor"></font><font class="preprocessor">#define value_le(v1,v2) ((v1)&lt;=(v2))</font>
00343 <font class="preprocessor"></font>
00344 <font class="comment">/* Trian operators on 'Value' */</font>
00345 
<a name="l00346"></a><a class="code" href="arithmetique_8h.html#a28">00346</a> <font class="preprocessor">#define value_sign(v) (value_eq(v,VALUE_ZERO)?0:value_lt(v,VALUE_ZERO)?-1:1)</font>
<a name="l00347"></a><a class="code" href="arithmetique_8h.html#a29">00347</a> <font class="preprocessor"></font><font class="preprocessor">#define value_compare(v1,v2) (value_eq(v1,v2)?0:value_lt(v1,v2)?-1:1)</font>
00348 <font class="preprocessor"></font>
00349 <font class="comment">/* Binary operators on 'Value' */</font>
00350 
<a name="l00351"></a><a class="code" href="arithmetique_8h.html#a30">00351</a> <font class="preprocessor">#define value_plus(v1,v2)               ((v1)+(v2))</font>
<a name="l00352"></a><a class="code" href="arithmetique_8h.html#a31">00352</a> <font class="preprocessor"></font><font class="preprocessor">#define value_div(v1,v2)                ((v1)/(v2))</font>
<a name="l00353"></a><a class="code" href="arithmetique_8h.html#a32">00353</a> <font class="preprocessor"></font><font class="preprocessor">#define value_mod(v1,v2)                ((v1)%(v2))</font>
<a name="l00354"></a><a class="code" href="arithmetique_8h.html#a33">00354</a> <font class="preprocessor"></font><font class="preprocessor">#define value_direct_multiply(v1,v2)    ((v1)*(v2)) </font><font class="comment">/* direct! */</font>
<a name="l00355"></a><a class="code" href="arithmetique_8h.html#a34">00355</a> <font class="preprocessor">#define value_minus(v1,v2)              ((v1)-(v2))</font>
<a name="l00356"></a><a class="code" href="arithmetique_8h.html#a35">00356</a> <font class="preprocessor"></font><font class="preprocessor">#define value_pdiv(v1,v2)               (divide((v1),(v2)))</font>
<a name="l00357"></a><a class="code" href="arithmetique_8h.html#a36">00357</a> <font class="preprocessor"></font><font class="preprocessor">#define value_pmod(v1,v2)               (modulo((v1),(v2)))</font>
<a name="l00358"></a><a class="code" href="arithmetique_8h.html#a37">00358</a> <font class="preprocessor"></font><font class="preprocessor">#define value_min(v1,v2)                (value_le((v1),(v2))? (v1): (v2))</font>
<a name="l00359"></a><a class="code" href="arithmetique_8h.html#a38">00359</a> <font class="preprocessor"></font><font class="preprocessor">#define value_max(v1,v2)                (value_ge((v1),(v2))? (v1): (v2))</font>
<a name="l00360"></a><a class="code" href="arithmetique_8h.html#a39">00360</a> <font class="preprocessor"></font><font class="preprocessor">#define value_or(v1,v2)                 ((v1)|(v2))</font>
<a name="l00361"></a><a class="code" href="arithmetique_8h.html#a40">00361</a> <font class="preprocessor"></font><font class="preprocessor">#define value_and(v1,v2)                ((v1)&amp;(v2))</font>
<a name="l00362"></a><a class="code" href="arithmetique_8h.html#a41">00362</a> <font class="preprocessor"></font><font class="preprocessor">#define value_lshift(v1,v2)             ((v1)&lt;&lt;(v2))</font>
<a name="l00363"></a><a class="code" href="arithmetique_8h.html#a42">00363</a> <font class="preprocessor"></font><font class="preprocessor">#define value_rshift(v1,v2)             ((v1)&gt;&gt;(v2))</font>
00364 <font class="preprocessor"></font>                                  
00365 <font class="comment">/* Binary operations on 'Value' */</font> 
00366 
<a name="l00367"></a><a class="code" href="arithmetique_8h.html#a43">00367</a> <font class="preprocessor">#define value_addto(ref,val1,val2)      ((ref) = (val1)+(val2))</font>
<a name="l00368"></a><a class="code" href="arithmetique_8h.html#a44">00368</a> <font class="preprocessor"></font><font class="preprocessor">#define value_add_int(ref,val,vint)     ((ref) = (val)+(Value)(vint))</font>
<a name="l00369"></a><a class="code" href="arithmetique_8h.html#a45">00369</a> <font class="preprocessor"></font><font class="preprocessor">#define value_increment(ref,val)        ((ref) = (val)+VALUE_ONE)</font>
<a name="l00370"></a><a class="code" href="arithmetique_8h.html#a46">00370</a> <font class="preprocessor"></font><font class="preprocessor">#define value_direct_product(ref,val1,val2) ((ref) = (val1)*(val2)) </font><font class="comment">/* direct! */</font>
<a name="l00371"></a><a class="code" href="arithmetique_8h.html#a47">00371</a> <font class="preprocessor">#define value_multiply(ref,val1,val2)   ((ref) = value_mult((val1),(val2)))</font>
<a name="l00372"></a><a class="code" href="arithmetique_8h.html#a48">00372</a> <font class="preprocessor"></font><font class="preprocessor">#define value_substract(ref,val1,val2)  ((ref) = (val1)-(val2))</font>
<a name="l00373"></a><a class="code" href="arithmetique_8h.html#a49">00373</a> <font class="preprocessor"></font><font class="preprocessor">#define value_sub_int(ref,val,vint)     ((ref) = (val)-(Value)(vint))</font>
<a name="l00374"></a><a class="code" href="arithmetique_8h.html#a50">00374</a> <font class="preprocessor"></font><font class="preprocessor">#define value_decrement(ref,val)        ((ref) = (val)-VALUE_ONE)</font>
<a name="l00375"></a><a class="code" href="arithmetique_8h.html#a51">00375</a> <font class="preprocessor"></font><font class="preprocessor">#define value_division(ref,val1,val2)   ((ref) = (val1)/(val2))</font>
<a name="l00376"></a><a class="code" href="arithmetique_8h.html#a52">00376</a> <font class="preprocessor"></font><font class="preprocessor">#define value_modulus(ref,val1,val2)    ((ref) = (val1)%(val2))</font>
<a name="l00377"></a><a class="code" href="arithmetique_8h.html#a53">00377</a> <font class="preprocessor"></font><font class="preprocessor">#define value_pdivision(ref,val1,val2)  ((ref) = value_pdiv((val1),(val2)))</font>
<a name="l00378"></a><a class="code" href="arithmetique_8h.html#a54">00378</a> <font class="preprocessor"></font><font class="preprocessor">#define value_oppose(ref,val)           ((ref) = value_uminus((val)))</font>
<a name="l00379"></a><a class="code" href="arithmetique_8h.html#a55">00379</a> <font class="preprocessor"></font><font class="preprocessor">#define value_absolute(ref,val)         ((ref) = value_abs((val)))</font>
<a name="l00380"></a><a class="code" href="arithmetique_8h.html#a56">00380</a> <font class="preprocessor"></font><font class="preprocessor">#define value_minimum(ref,val1,val2)    ((ref) = value_min((val1),(val2)))</font>
<a name="l00381"></a><a class="code" href="arithmetique_8h.html#a57">00381</a> <font class="preprocessor"></font><font class="preprocessor">#define value_maximum(ref,val1,val2)    ((ref) = value_max((val1),(val2)))</font>
<a name="l00382"></a><a class="code" href="arithmetique_8h.html#a58">00382</a> <font class="preprocessor"></font><font class="preprocessor">#define value_orto(ref,val1,val2)       ((ref) = (val1)|(val2))</font>
<a name="l00383"></a><a class="code" href="arithmetique_8h.html#a59">00383</a> <font class="preprocessor"></font><font class="preprocessor">#define value_andto(ref,val1,val2)      ((ref) = (val1)&amp;(val2))</font>
00384 <font class="preprocessor"></font>
00385 <font class="comment">/* Unary operators on 'Value' */</font>
00386 
<a name="l00387"></a><a class="code" href="arithmetique_8h.html#a60">00387</a> <font class="preprocessor">#define value_uminus(val)  (-(val))</font>
<a name="l00388"></a><a class="code" href="arithmetique_8h.html#a61">00388</a> <font class="preprocessor"></font><font class="preprocessor">#define value_not(val)  (~(val))</font>
<a name="l00389"></a><a class="code" href="arithmetique_8h.html#a62">00389</a> <font class="preprocessor"></font><font class="preprocessor">#define value_abs(val) (value_posz_p(val)? \</font>
00390 <font class="preprocessor">    (val) :                                \</font>
00391 <font class="preprocessor">    (value_ne((val), VALUE_NAN) ?          \</font>
00392 <font class="preprocessor">     value_uminus(val) :                   \</font>
00393 <font class="preprocessor">    (THROW (overflow_error), VALUE_NAN )))</font>
00394 <font class="preprocessor"></font>
00395 <font class="comment">/* Conditional operations on 'Value' */</font>
00396 
<a name="l00397"></a><a class="code" href="arithmetique_8h.html#a63">00397</a> <font class="preprocessor">#define value_pos_p(val)      value_gt(val,VALUE_ZERO)</font>
<a name="l00398"></a><a class="code" href="arithmetique_8h.html#a64">00398</a> <font class="preprocessor"></font><font class="preprocessor">#define value_neg_p(val)      value_lt(val,VALUE_ZERO)</font>
<a name="l00399"></a><a class="code" href="arithmetique_8h.html#a65">00399</a> <font class="preprocessor"></font><font class="preprocessor">#define value_posz_p(val)     value_ge(val,VALUE_ZERO)</font>
<a name="l00400"></a><a class="code" href="arithmetique_8h.html#a66">00400</a> <font class="preprocessor"></font><font class="preprocessor">#define value_negz_p(val)     value_le(val,VALUE_ZERO)</font>
<a name="l00401"></a><a class="code" href="arithmetique_8h.html#a67">00401</a> <font class="preprocessor"></font><font class="preprocessor">#define value_zero_p(val)     value_eq(val,VALUE_ZERO)</font>
<a name="l00402"></a><a class="code" href="arithmetique_8h.html#a68">00402</a> <font class="preprocessor"></font><font class="preprocessor">#define value_notzero_p(val)  value_ne(val,VALUE_ZERO)</font>
<a name="l00403"></a><a class="code" href="arithmetique_8h.html#a69">00403</a> <font class="preprocessor"></font><font class="preprocessor">#define value_one_p(val)      value_eq(val,VALUE_ONE)</font>
<a name="l00404"></a><a class="code" href="arithmetique_8h.html#a70">00404</a> <font class="preprocessor"></font><font class="preprocessor">#define value_notone_p(val)   value_ne(val,VALUE_ONE)</font>
<a name="l00405"></a><a class="code" href="arithmetique_8h.html#a71">00405</a> <font class="preprocessor"></font><font class="preprocessor">#define value_mone_p(val)     value_eq(val,VALUE_MONE)</font>
<a name="l00406"></a><a class="code" href="arithmetique_8h.html#a72">00406</a> <font class="preprocessor"></font><font class="preprocessor">#define value_notmone_p(val)  value_ne(val,VALUE_MONE)</font>
<a name="l00407"></a><a class="code" href="arithmetique_8h.html#a73">00407</a> <font class="preprocessor"></font><font class="preprocessor">#define value_min_p(val)      value_eq(val,VALUE_MIN)</font>
<a name="l00408"></a><a class="code" href="arithmetique_8h.html#a74">00408</a> <font class="preprocessor"></font><font class="preprocessor">#define value_max_p(val)      value_eq(val,VALUE_MAX)</font>
<a name="l00409"></a><a class="code" href="arithmetique_8h.html#a75">00409</a> <font class="preprocessor"></font><font class="preprocessor">#define value_notmin_p(val)   value_ne(val,VALUE_MIN)</font>
<a name="l00410"></a><a class="code" href="arithmetique_8h.html#a76">00410</a> <font class="preprocessor"></font><font class="preprocessor">#define value_notmax_p(val)   value_ne(val,VALUE_MAX)</font>
00411 <font class="preprocessor"></font>
00412 <font class="preprocessor">#endif </font><font class="comment">/* 'Value' set to |longlong|long|float|char *|int */</font>
00413 
00414 
00415 <font class="comment">/* *********************** PROTECTED MULTIPLICATION ********************** */</font>
00416 
00417 <font class="preprocessor">#include "<a class="code" href="arithmetic__errors_8h.html">arithmetic_errors.h</a>"</font>
00418 
00419 <font class="comment">/* (|v| &lt; MAX / |w|) =&gt; v*w is okay</font>
00420 <font class="comment"> * I could check ((v*w)/w)==v but a tmp would be useful</font>
00421 <font class="comment"> */</font>
<a name="l00422"></a><a class="code" href="arithmetique_8h.html#a77">00422</a> <font class="preprocessor">#define value_protected_hard_idiv_multiply(v,w,throw)           \</font>
00423 <font class="preprocessor">  ((value_zero_p(w) || value_zero_p(v))? VALUE_ZERO:            \</font>
00424 <font class="preprocessor">   value_lt(value_abs(v),value_div(VALUE_MAX,value_abs(w)))?    \</font>
00425 <font class="preprocessor">   value_direct_multiply(v,w): (throw, VALUE_NAN))</font>
00426 <font class="preprocessor"></font>
00427 <font class="comment">/* is a software idiv is assumed, quick check performed first</font>
00428 <font class="comment"> */</font>
00429 <font class="preprocessor">#if defined(LINEAR_VALUE_ASSUME_SOFTWARE_IDIV)</font>
00430 <font class="preprocessor"></font><font class="preprocessor">#define value_protected_multiply(v,w,throw)                                   \</font>
00431 <font class="preprocessor">  ((value_le(v,VALUE_SQRT_MAX) &amp;&amp; value_le(w,VALUE_SQRT_MAX) &amp;&amp;               \</font>
00432 <font class="preprocessor">   value_ge(v,VALUE_SQRT_MIN) &amp;&amp; value_ge(w,VALUE_SQRT_MIN))?                 \</font>
00433 <font class="preprocessor">   value_direct_multiply(v,w): value_protected_hard_idiv_multiply(v,w,throw))</font>
00434 <font class="preprocessor"></font><font class="preprocessor">#else</font>
<a name="l00435"></a><a class="code" href="arithmetique_8h.html#a78">00435</a> <font class="preprocessor"></font><font class="preprocessor">#define value_protected_multiply(v,w,throw)             \</font>
00436 <font class="preprocessor">   value_protected_hard_idiv_multiply(v,w,throw)</font>
00437 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00438 <font class="preprocessor"></font>
00439 <font class="comment">/* protected versions</font>
00440 <font class="comment"> */</font>
<a name="l00441"></a><a class="code" href="arithmetique_8h.html#a79">00441</a> <font class="preprocessor">#define value_protected_mult(v,w)                               \</font>
00442 <font class="preprocessor">    value_protected_multiply(v,w,THROW(overflow_error))</font>
<a name="l00443"></a><a class="code" href="arithmetique_8h.html#a80">00443</a> <font class="preprocessor"></font><font class="preprocessor">#define value_protected_product(v,w)            \</font>
00444 <font class="preprocessor">    v=value_protected_mult(v,w)</font>
00445 <font class="preprocessor"></font>
00446 <font class="comment">/* whether the default is protected or not </font>
00447 <font class="comment"> * this define makes no sense any more... well, doesn't matter. FC.</font>
00448 <font class="comment"> */</font>
00449 <font class="preprocessor">#if defined(LINEAR_VALUE_PROTECT_MULTIPLY)</font>
00450 <font class="preprocessor"></font><font class="preprocessor">#define value_mult(v,w) value_protected_mult(v,w)</font>
00451 <font class="preprocessor"></font><font class="preprocessor">#define value_product(v,w) value_protected_product(v,w)</font>
00452 <font class="preprocessor"></font><font class="preprocessor">#else</font>
00453 <font class="preprocessor"></font>
00454 <font class="comment">/* I do enforce the protection whatever requested:-)</font>
00455 <font class="comment"> * prints out a message and throws the exception, hoping</font>
00456 <font class="comment"> * that some valid CATCH waits for it upwards. </font>
00457 <font class="comment"> */</font>
<a name="l00458"></a><a class="code" href="arithmetique_8h.html#a81">00458</a> <font class="preprocessor">#define value_mult(v,w)                                                       \</font>
00459 <font class="preprocessor">  value_protected_multiply(v,w,                                               \</font>
00460 <font class="preprocessor">    (fprintf(stderr,"[value_mult] value overflow!\n"),THROW(overflow_error)))</font>
<a name="l00461"></a><a class="code" href="arithmetique_8h.html#a82">00461</a> <font class="preprocessor"></font><font class="preprocessor">#define value_product(v,w) v=value_mult(v,w)</font>
00462 <font class="preprocessor"></font>
00463 <font class="comment">/* was:</font>
00464 <font class="comment"> * #define value_mult(v,w) value_direct_multiply(v,w)</font>
00465 <font class="comment"> * #define value_product(v,w) value_direct_product(v,w)</font>
00466 <font class="comment"> * could be: protected versions...</font>
00467 <font class="comment"> */</font>
00468 <font class="preprocessor">#endif</font>
00469 <font class="preprocessor"></font>
00470 <font class="comment">/******************************************************* STATIC VALUE DEBUG */</font>
00471 
00472 <font class="comment">/* LINEAR_VALUE_IS_CHARS is used for type checking.</font>
00473 <font class="comment"> * some operations are not allowed on (char*), thus</font>
00474 <font class="comment"> * they are switched to some other operation here...</font>
00475 <font class="comment"> */</font>
00476 <font class="preprocessor">#if defined(LINEAR_VALUE_IS_CHARS)</font>
00477 <font class="preprocessor"></font><font class="preprocessor">#define value_fake_binary(v1,v2) ((Value)((v1).i+(v2).i))</font>
00478 <font class="preprocessor"></font><font class="preprocessor">#define value_bool_binary(v1,v2) ((int)((v1).i+(v2).i))</font>
00479 <font class="preprocessor"></font><font class="preprocessor">#undef float_to_value</font>
00480 <font class="preprocessor"></font><font class="preprocessor">#define float_to_value(f) ((Value)f)</font>
00481 <font class="preprocessor"></font><font class="preprocessor">#undef double_to_value</font>
00482 <font class="preprocessor"></font><font class="preprocessor">#define double_to_value(f) ((Value)f)</font>
00483 <font class="preprocessor"></font><font class="preprocessor">#undef value_uminus</font>
00484 <font class="preprocessor"></font><font class="preprocessor">#define value_uminus(v) (v)</font>
00485 <font class="preprocessor"></font><font class="preprocessor">#undef value_mult</font>
00486 <font class="preprocessor"></font><font class="preprocessor">#define value_mult(v1,v2) value_fake_binary(v1,v2)</font>
00487 <font class="preprocessor"></font><font class="preprocessor">#undef value_mod</font>
00488 <font class="preprocessor"></font><font class="preprocessor">#define value_mod(v1,v2) value_fake_binary(v1,v2)</font>
00489 <font class="preprocessor"></font><font class="preprocessor">#undef value_ge</font>
00490 <font class="preprocessor"></font><font class="preprocessor">#define value_ge(v1,v2) value_bool_binary(v1,v2)</font>
00491 <font class="preprocessor"></font><font class="preprocessor">#undef value_gt</font>
00492 <font class="preprocessor"></font><font class="preprocessor">#define value_gt(v1,v2) value_bool_binary(v1,v2)</font>
00493 <font class="preprocessor"></font><font class="preprocessor">#undef value_le</font>
00494 <font class="preprocessor"></font><font class="preprocessor">#define value_le(v1,v2) value_bool_binary(v1,v2)</font>
00495 <font class="preprocessor"></font><font class="preprocessor">#undef value_lt</font>
00496 <font class="preprocessor"></font><font class="preprocessor">#define value_lt(v1,v2) value_bool_binary(v1,v2)</font>
00497 <font class="preprocessor"></font><font class="preprocessor">#undef value_ne</font>
00498 <font class="preprocessor"></font><font class="preprocessor">#define value_ne(v1,v2) value_bool_binary(v1,v2)</font>
00499 <font class="preprocessor"></font><font class="preprocessor">#undef value_eq</font>
00500 <font class="preprocessor"></font><font class="preprocessor">#define value_eq(v1,v2) value_bool_binary(v1,v2)</font>
00501 <font class="preprocessor"></font><font class="preprocessor">#undef value_plus</font>
00502 <font class="preprocessor"></font><font class="preprocessor">#define value_plus(v1,v2) value_fake_binary(v1,v2)</font>
00503 <font class="preprocessor"></font><font class="preprocessor">#undef value_minus</font>
00504 <font class="preprocessor"></font><font class="preprocessor">#define value_minus(v1,v2) value_fake_binary(v1,v2)</font>
00505 <font class="preprocessor"></font><font class="preprocessor">#undef value_pdiv</font>
00506 <font class="preprocessor"></font><font class="preprocessor">#define value_pdiv(v1,v2) value_fake_binary(v1,v2)</font>
00507 <font class="preprocessor"></font><font class="preprocessor">#undef value_div</font>
00508 <font class="preprocessor"></font><font class="preprocessor">#define value_div(v1,v2) value_fake_binary(v1,v2)</font>
00509 <font class="preprocessor"></font><font class="preprocessor">#undef value_mod</font>
00510 <font class="preprocessor"></font><font class="preprocessor">#define value_mod(v1,v2) value_fake_binary(v1,v2)</font>
00511 <font class="preprocessor"></font><font class="preprocessor">#undef value_addto</font>
00512 <font class="preprocessor"></font><font class="preprocessor">#define value_addto(v1,v2) value_assign(v1,value_plus(v1,v2))</font>
00513 <font class="preprocessor"></font><font class="preprocessor">#undef value_substract</font>
00514 <font class="preprocessor"></font><font class="preprocessor">#define value_substract(v1,v2) value_addto(v1,v2)</font>
00515 <font class="preprocessor"></font><font class="preprocessor">#undef value_product</font>
00516 <font class="preprocessor"></font><font class="preprocessor">#define value_product(v1,v2) value_addto(v1,v2)</font>
00517 <font class="preprocessor"></font><font class="preprocessor">#undef value_modulus</font>
00518 <font class="preprocessor"></font><font class="preprocessor">#define value_modulus(v1,v2) value_addto(v1,v2)</font>
00519 <font class="preprocessor"></font><font class="preprocessor">#undef value_division</font>
00520 <font class="preprocessor"></font><font class="preprocessor">#define value_division(v1,v2) value_addto(v1,v2)</font>
00521 <font class="preprocessor"></font><font class="preprocessor">#undef value_increment</font>
00522 <font class="preprocessor"></font><font class="preprocessor">#define value_increment(v) value_addto(v,VALUE_ONE)</font>
00523 <font class="preprocessor"></font><font class="preprocessor">#undef value_decrement</font>
00524 <font class="preprocessor"></font><font class="preprocessor">#define value_decrement(v) value_addto(v,VALUE_MONE)</font>
00525 <font class="preprocessor"></font><font class="preprocessor">#undef value_orto</font>
00526 <font class="preprocessor"></font><font class="preprocessor">#define value_orto(ref,val) value_addto(v1,v2)</font>
00527 <font class="preprocessor"></font><font class="preprocessor">#undef value_andto</font>
00528 <font class="preprocessor"></font><font class="preprocessor">#define value_andto(ref,val) value_addto(v1,v2) </font>
00529 <font class="preprocessor"></font><font class="preprocessor">#undef value_or</font>
00530 <font class="preprocessor"></font><font class="preprocessor">#define value_or(v1,v2) value_fake_binary(v1,v2)</font>
00531 <font class="preprocessor"></font><font class="preprocessor">#undef value_and</font>
00532 <font class="preprocessor"></font><font class="preprocessor">#define value_and(v1,v2) value_fake_binary(v1,v2)</font>
00533 <font class="preprocessor"></font><font class="preprocessor">#undef value_lshift</font>
00534 <font class="preprocessor"></font><font class="preprocessor">#define value_lshift(v1,v2) value_fake_binary(v1,v2)</font>
00535 <font class="preprocessor"></font><font class="preprocessor">#undef value_rshift</font>
00536 <font class="preprocessor"></font><font class="preprocessor">#define value_rshift(v1,v2) value_fake_binary(v1,v2)</font>
00537 <font class="preprocessor"></font><font class="preprocessor">#endif </font>
00538 <font class="preprocessor"></font>
00539 
00540 <font class="comment">/* valeur absolue</font>
00541 <font class="comment"> */</font>
00542 <font class="preprocessor">#ifndef ABS</font>
<a name="l00543"></a><a class="code" href="arithmetique_8h.html#a83">00543</a> <font class="preprocessor"></font><font class="preprocessor">#define ABS(x) (((x)&gt;=0) ? (x) : -(x))</font>
00544 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00545 <font class="preprocessor"></font>
00546 <font class="comment">/* minimum et maximum </font>
00547 <font class="comment"> * if they are defined somewhere else, they are very likely </font>
00548 <font class="comment"> * to be defined the same way. Thus the previous def is not overwritten.</font>
00549 <font class="comment"> */</font>
00550 <font class="preprocessor">#ifndef MIN</font>
<a name="l00551"></a><a class="code" href="arithmetique_8h.html#a84">00551</a> <font class="preprocessor"></font><font class="preprocessor">#define MIN(x,y) (((x)&gt;=(y))?(y):(x))</font>
00552 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00553 <font class="preprocessor"></font><font class="preprocessor">#ifndef MAX</font>
<a name="l00554"></a><a class="code" href="arithmetique_8h.html#a85">00554</a> <font class="preprocessor"></font><font class="preprocessor">#define MAX(x,y) (((x)&gt;=(y))?(x):(y))</font>
00555 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00556 <font class="preprocessor"></font>
00557 <font class="comment">/* signe d'un entier: -1, 0 ou 1 */</font>
<a name="l00558"></a><a class="code" href="arithmetique_8h.html#a86">00558</a> <font class="preprocessor">#define SIGN(x) (((x)&gt;0)? 1 : ((x)==0? 0 : -1))</font>
00559 <font class="preprocessor"></font>
00560 <font class="comment">/* division avec reste toujours positif</font>
00561 <font class="comment"> * basee sur les equations:</font>
00562 <font class="comment"> * a/(-b) = - (a/b)</font>
00563 <font class="comment"> * (-a)/b = - ((a+b-1)/b)</font>
00564 <font class="comment"> * ou a et b sont des entiers positifs</font>
00565 <font class="comment"> */</font>
<a name="l00566"></a><a class="code" href="arithmetique_8h.html#a87">00566</a> <font class="preprocessor">#define DIVIDE(x,y) ((y)&gt;0? POSITIVE_DIVIDE(x,y) : \</font>
00567 <font class="preprocessor">                     -POSITIVE_DIVIDE((x),(-(y))))</font>
00568 <font class="preprocessor"></font>
00569 <font class="comment">/* division avec reste toujours positif quand y est positif: assert(y&gt;=0) */</font>
<a name="l00570"></a><a class="code" href="arithmetique_8h.html#a88">00570</a> <font class="preprocessor">#define POSITIVE_DIVIDE(x,y) ((x)&gt;0 ? (x)/(y) : - (-(x)+(y)-1)/(y))</font>
00571 <font class="preprocessor"></font>
00572 <font class="comment">/* modulo a resultat toujours positif */</font>
<a name="l00573"></a><a class="code" href="arithmetique_8h.html#a89">00573</a> <font class="preprocessor">#define MODULO(x,y) ((y)&gt;0 ? POSITIVE_MODULO(x,y) : POSITIVE_MODULO(-x,-y))</font>
00574 <font class="preprocessor"></font>
00575 <font class="comment">/* modulo par rapport a un nombre positif: assert(y&gt;=0)</font>
00576 <font class="comment"> *</font>
00577 <font class="comment"> * Ce n'est pas la macro la plus efficace que j'aie jamais ecrite: il faut</font>
00578 <font class="comment"> * faire, dans le pire des cas, deux appels a la routine .rem, qui n'est</font>
00579 <font class="comment"> * surement pas plus cablee que la division ou la multiplication</font>
00580 <font class="comment"> */</font>
<a name="l00581"></a><a class="code" href="arithmetique_8h.html#a90">00581</a> <font class="preprocessor">#define POSITIVE_MODULO(x,y) ((x) &gt; 0 ? (x)%(y) : \</font>
00582 <font class="preprocessor">                              ((x)%(y) == 0 ? 0 : ((y)-(-(x))%(y))))</font>
00583 <font class="preprocessor"></font>                              
00584 <font class="comment">/* Pour la recherche de performance, selection d'une implementation</font>
00585 <font class="comment"> * particuliere des fonctions</font>
00586 <font class="comment"> */</font>
00587 
<a name="l00588"></a><a class="code" href="arithmetique_8h.html#a91">00588</a> <font class="preprocessor">#define divide(a,b) DIVIDE(a,b)</font>
00589 <font class="preprocessor"></font>
<a name="l00590"></a><a class="code" href="arithmetique_8h.html#a92">00590</a> <font class="preprocessor">#define modulo(a,b) MODULO(a,b)</font>
00591 <font class="preprocessor"></font>
<a name="l00592"></a><a class="code" href="structfrac.html#m2">00592</a> <font class="keyword">typedef</font> <font class="keyword">struct </font>{<a class="code" href="arithmetique_8h.html#a93">Value</a> num, den; <font class="keywordtype">int</font> numero ; } <a class="code" href="structfrac.html">frac</a> ;
<a name="l00593"></a><a class="code" href="structcol.html#m0">00593</a> <font class="keyword">typedef</font> <font class="keyword">struct </font><a class="code" href="structcol.html">col</a>{<font class="keywordtype">int</font> <a class="code" href="structcol.html#m0">taille</a>, <a class="code" href="structcol.html#m1">existe</a> ; <a class="code" href="structfrac.html">frac</a> *<a class="code" href="structcol.html#m2">colonne</a> ;} <a class="code" href="structcol.html">tableau</a> ;
00594 
00595 <font class="comment">/* errors.c */</font> 
<a name="l00596"></a><a class="code" href="arithmetique_8h.html#a95">00596</a> <font class="keyword">extern</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> <a class="code" href="arithmetique_8h.html#a95">overflow_error</a>;
<a name="l00597"></a><a class="code" href="arithmetique_8h.html#a96">00597</a> <font class="keyword">extern</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> <a class="code" href="arithmetique_8h.html#a96">simplex_arithmetic_error</a>;
<a name="l00598"></a><a class="code" href="arithmetique_8h.html#a97">00598</a> <font class="keyword">extern</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> <a class="code" href="arithmetique_8h.html#a97">user_exception_error</a>;
<a name="l00599"></a><a class="code" href="arithmetique_8h.html#a98">00599</a> <font class="keyword">extern</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> <a class="code" href="arithmetique_8h.html#a98">parser_exception_error</a>;
<a name="l00600"></a><a class="code" href="arithmetique_8h.html#a99">00600</a> <font class="keyword">extern</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> <a class="code" href="arithmetique_8h.html#a99">any_exception_error</a>; 
<a name="l00601"></a><a class="code" href="arithmetique_8h.html#a100">00601</a> <font class="keyword">extern</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> <a class="code" href="arithmetique_8h.html#a100">the_last_just_thrown_exception</a>;
<a name="l00602"></a><a class="code" href="arithmetique_8h.html#a101">00602</a> <font class="keyword">extern</font> <font class="keywordtype">int</font> <a class="code" href="arithmetique_8h.html#a101">linear_exception_debug_mode</a>;
00603 <font class="keyword">extern</font> <font class="keywordtype">void</font> <a class="code" href="errors_8c.html#a15">dump_exception_stack_to_file</a>(FILE * <font class="comment">/*f*/</font>);
00604 <font class="keyword">extern</font> <font class="keywordtype">void</font> <a class="code" href="errors_8c.html#a103">dump_exception_stack</a>(<font class="keywordtype">void</font>);
00605 <font class="keyword">extern</font> jmp_buf *<a class="code" href="errors_8c.html#a17">push_exception_on_stack</a>(<font class="keywordtype">int</font> <font class="comment">/*what*/</font>, <font class="keywordtype">char</font> * <font class="comment">/*function*/</font>, <font class="keywordtype">char</font> * <font class="comment">/*file*/</font>, <font class="keywordtype">int</font> <font class="comment">/*line*/</font>);
00606 <font class="keyword">extern</font> <font class="keywordtype">void</font> <a class="code" href="errors_8c.html#a18">pop_exception_from_stack</a>(<font class="keywordtype">int</font> <font class="comment">/*what*/</font>, <font class="keywordtype">char</font> * <font class="comment">/*function*/</font>, <font class="keywordtype">char</font> * <font class="comment">/*file*/</font>, <font class="keywordtype">int</font> <font class="comment">/*line*/</font>);
00607 <font class="keyword">extern</font> <font class="keywordtype">void</font> <a class="code" href="errors_8c.html#a19">throw_exception</a>(<font class="keywordtype">int</font> <font class="comment">/*what*/</font>, <font class="keywordtype">char</font> * <font class="comment">/*function*/</font>, <font class="keywordtype">char</font> * <font class="comment">/*file*/</font>, <font class="keywordtype">int</font> <font class="comment">/*line*/</font>);
00608 
00609 <font class="preprocessor">#endif </font><font class="comment">/* arithmetique_header_included */</font>
00610 
00611 
00612 
</pre></div><hr><address align="right"><small>Generated on Fri Nov 8 12:10:06 2002 for Polylib by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
